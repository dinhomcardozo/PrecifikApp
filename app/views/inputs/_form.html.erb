<main class="index-container">
<%= form_with(model: input, multipart: true, local: true) do |f| %>
  <div class="mb-3">
    <%= f.label :name, "Nome do Insumo", class: "custom-label" %>
    <%= f.text_field :name, class: "form-control" %>
  </div>

  <div class="form-row-inline">
    <div class="field-inline">
      <%= f.label :input_type_id, "Tipo de Insumo", class: "custom-label" %>
      <%= f.collection_select :input_type_id, InputType.all, :id, :name, { include_blank: true }, class: "form-select" %>
    </div>

    <div class="field-inline">
      <%= f.label :supplier_id, "Fornecedor", class: "custom-label" %>
      <%= f.collection_select :supplier_id, Supplier.all, :id, :name, { include_blank: true }, class: "form-select" %>
    </div>

    <div class="field-inline">
      <%= f.label :brand_id, "Marca", class: "custom-label" %>
      <%= f.select :brand_id,
                  options_for_select(
                    [["+ CRIAR NOVA MARCA", "new_brand", { class: "new-brand-option" }]] +
                    Brand.where(client_id: Current.user_client.client_id).pluck(:name, :id),
                    f.object.brand_id
                  ),
                  { prompt: "Selecione uma marca" },
                  {
                    class: "form-select",
                    required: true,
                    id: "brands_select",
                    data: {
                      controller: "new-brand-inputs",
                      action: "change->new-brand-inputs#openModalIfNew",
                      new_brand_inputs_target: "select"
                    }
                  } %>
    </div>
  </div>

  <div class="form-row-inline">
    <div class="field-inline">
      <%= f.label :cost, "Custo (R$)", class: "custom-label" %>
      <%= f.number_field :cost, step: "any", class: "form-control" %>
    </div>

    <div class="field-inline">
      <%= f.label :weight, "Peso", class: "custom-label" %>
      <%= f.number_field :weight, step: "any", class: "form-control" %>
    </div>

    <div class="field-inline">
      <%= f.label :unit_of_measurement, "Unidade de Medida", class: "custom-label" %>
      <%= f.select :unit_of_measurement, ['g', 'mL'], {}, class: "form-select" %>
    </div>
  </div>

  <div>
    <%= f.label :image, "Imagem", style: "display: block", class: "custom-label"  %>
    <%= f.file_field :image %>
  </div>

  <hr>

  <div>
    <%= render 'nutritional_table_fields', f: f %>
  </div>

  <div>
    <div>
     <%= f.submit "Salvar Insumo", class: "standart-button" %>
    </div>
    <div>
      <%= link_to "Voltar", inputs_path, class: "action-button" %>
    </div>
  </div>
<% end %>

<%= render "brands/new_modal" %>