<%# app/views/services/professionals/_form.html.erb %>
<% 
  form_url    = professional.persisted? ? services_professional_path(professional)
                                        : services_professionals_path
  form_method = professional.persisted? ? :patch : :post
%>

<%= form_with url: form_url,
              method: form_method,
              scope: :professional,
              local: true do |form| %>
  <% if professional.errors.any? %>
    <div style="color: red">
      <h2>
        <%= pluralize(professional.errors.count, "erro") %>
        proibiu este profissional de ser salvo:
      </h2>
      <ul>
        <% professional.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div>
    <%= form.label :full_name, "Nome completo", style: "display: block" %>
    <%= form.text_field :full_name %>
  </div>

  <div>
    <%= form.label :role_id, "Função", style: "display: block" %>
    <%= form.collection_select(
          :role_id,
          Services::Role.all,
          :id,
          :description,
          prompt: "Selecione"
        ) %>
  </div>

  <div>
    <%= form.label :cpf, style: "display: block" %>
    <%= form.text_field :cpf %>
  </div>

  <div>
    <%= form.label :company_name, "Empresa", style: "display: block" %>
    <%= form.text_field :company_name %>
  </div>

  <div>
    <%= form.label :cnpj, style: "display: block" %>
    <%= form.text_field :cnpj %>
  </div>

  <div>
    <%= form.label :hourly_rate, "Valor atual (R$/h)", style: "display: block" %>
    <%= form.number_field :hourly_rate, step: 0.01 %>
  </div>

  <div>
    <%= form.submit (professional.persisted? ? "Atualizar" : "Criar"), class: "standart-button" %>
  </div>
<% end %>