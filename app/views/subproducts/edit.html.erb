<%= form_with(model: @subproduct, local: true) do |f| %>
  <h4 class="mb-3">Configurações do Subproduto</h4>

    <div class="row mb-3">
      <div class="col-md-6">
        <%= f.label :name %>
        <%= f.text_field :name, class: "form-control" %>
      </div>
      <div class="col-md-3">
        <%= f.label :unit_of_measurement, "Unidade de Medida" %>
        <%= f.select :unit_of_measurement, ['kg', 'g', 'mL', 'L'], {}, class: "form-select" %>
      </div>
      <div class="col-md-3">
        <%= f.label :brand_id, "Marca" %>
        <%= f.collection_select :brand_id, Brand.all, :id, :name, { include_blank: true }, class: "form-select" %>
      </div>
    </div>

  <h4>Composição</h4>
  <div class="fields_container">
    <table class="table table-sm">
      <tbody id="compositions">
        <%= f.fields_for :subproduct_compositions do |sc| %>
          <%= render "subproduct_compositions_fields", f: sc %>
        <% end %>
        <tr>
          <td colspan="4">
            <%= link_to_add_fields "Adicionar Insumo", f, :subproduct_compositions %>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <%= f.submit "Salvar Composições" %>
<% end %>