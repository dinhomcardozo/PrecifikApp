<%= form_with(model: @tax_profile) do |f| %>
  <div class="mb-3">
    <%= f.label :description, "Descrição" %>
    <%= f.text_field :description, class: "form-control" %>
  </div>

  <h5>Itens de Tributo</h5>
  <%= f.fields_for :items do |item_f| %>
    <div class="row mb-2 align-items-end">
      <div class="col-4">
        <%= item_f.label :name, "Nome do Tributo" %>
        <%= item_f.text_field :name, class: "form-control", readonly: true %>
      </div>
      <div class="col-3">
        <%= item_f.label :value, "Valor (%)" %>
        <%= item_f.number_field :value, step: "any", class: "form-control" %>
      </div>
      <div class="col-3">
        <%= item_f.label :tax_type, "Tipo" %>
        <%= item_f.select :tax_type,
                          TaxProfileItem.tax_types.keys.map { |k| [k.humanize, k] },
                          {}, class: "form-select" %>
      </div>
      <%= item_f.hidden_field :id %>
    </div>
  <% end %>

  <%= f.submit class: "btn btn-primary mt-4" %>
<% end %>