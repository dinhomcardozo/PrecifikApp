<!-- app/views/products/_product_configurations.html.erb -->
<% if product.persisted? %>
  <% form_url, form_method = product_path(product, step: 1), :patch %>
<% else %>
  <% form_url, form_method = products_path, :post %>
<% end %>

<%= form_with model: product,
              url: products_path,
              local: false,
              data: { turbo_frame: "product_steps" } do |f| %>

  <h3>1) Configurações do Produto</h3>

  <div class="field">
    <%= f.label :description, "Descrição" %><br>
    <%= f.text_field :description, required: true %>
  </div>

  <div class="field">
    <%= f.label :brand_id, "Marca" %><br>
    <%= f.collection_select :brand_id,
                            Brand.all, :id, :name,
                            { prompt: "Selecione uma marca" },
                            { required: true, class: "form-select" } %>
  </div>

  <div class="field">
    <%= f.label :profit_margin_wholesale, "Margem Atacado (%)" %><br>
    <%= f.number_field :profit_margin_wholesale,
                        step: "any",
                        required: true,
                        class: "form-control" %>
  </div>

  <div class="field">
    <%= f.label :profit_margin_retail, "Margem Varejo (%)" %><br>
    <%= f.number_field :profit_margin_retail,
                        step: "any",
                        required: true,
                        class: "form-control" %>
  </div>

  <div class="actions mt-3">
    <%= f.submit "Salvar e continuar", class: "action-button" %>
  </div>
<% end %>