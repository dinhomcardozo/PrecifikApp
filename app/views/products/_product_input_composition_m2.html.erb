<!-- app/views/products/_product_input_composition_m2.html.erb -->
<tr data-controller="composition-row"
    data-type="input"
    data-unit="m2"
    data-new-record="true"
    class="composition-fields">
  <tr>
    <td>
      <%= f.select :input_id,
            Input.order(:name).map { |i|
              [i.name, i.id, { "data-unit": i.unit_of_measurement,
                               "data-cost": i.cost,
                               "data-weight": i.weight }]
            },
            { prompt: "Selecione Input" },
            { class: "inline-control",
              data: { action: "change->product-composition#renderInputFields" } } %>
    </td>

    <!-- Área digitada -->
    <td>
      <%= f.number_field :require_units,
            step: "any",
            placeholder: "Área (m²)",
            class: "inline-control",
            data: { action: "input->composition-row#calculate" } %>
    </td>

    <!-- Peso calculado -->
    <td>
      <%= f.number_field :weight,
            step: "any",
            readonly: true,
            placeholder: "Peso (g)",
            class: "inline-control" %>
    </td>

    <!-- Custo calculado -->
    <td>
      <%= f.number_field :cost,
            step: "any",
            readonly: true,
            placeholder: "Custo (R$)",
            class: "inline-control" %>
    </td>

    <!-- Remover -->
    <td>
      <%= f.hidden_field :_destroy, class: "remove-btn" %>
      <button type="button"
              class="icon-delete"
              data-action="composition-row#removeRow">
        <%= image_tag("icons/excluir.png", alt: "Remover") %>
      </button>
    </td>
  </tr>
</tbody>